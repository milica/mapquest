<?php

namespace Application\Controller;



use Application\Model\AreaModel;
use Application\Model\MapModel;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Application\Shared\ApplicationTrait;


class IndexController extends AbstractActionController
{


    protected $entityManager;

    protected function setEntityManager($em)
    {
        $this->entityManager = $em;
        return $this;
    }

    protected function getEntityManager()
    {
        if (null === $this->entityManager) {
            $this->setEntityManager($this->getOdmService());
        }
        return $this->entityManager;
    }

    protected function getOdmService()
    {
        return $this->getServiceLocator()->get('doctrine.documentmanager.odm_default');
    }

    public function indexAction()
    {
        // $this->init();
    }


    private function init()
    {
        $maps = array(
            array(
                'title' => 'New York',
                'areas' => array(
                    array('title' => 'Brooklin', 'bounds' => array(array(40.676472128500016, -73.96699905395508), array(40.68870870924964, -73.94914627075195), array(40.68532434783304, -73.91962051391602), array(40.67282675532094, -73.90417098999023),array(40.65511782196881, -73.90451431274414),array(40.647824541622086, -73.95120620727539)),'latitude' => 40.66826662543586,'longitude' => -73.93558502197266),
                    array('title' => 'Queens','bounds' => array(array(40.75714002927082, -73.8943862915039), array(40.75870037916103, -73.8442611694336), array(40.74309523218185, -73.83739471435547), array(40.730088145502236, -73.88545989990234)),'latitude' => 40.74439426233163,'longitude' => -73.86589050292969),
                    array('title' => 'Queens','bounds' => array(array(40.75714002927082, -73.8943862915039), array(40.75870037916103, -73.8442611694336), array(40.74309523218185, -73.83739471435547), array(40.730088145502236, -73.88545989990234)),'latitude' => 40.74439426233163,'longitude' => -73.86589050292969),
                    array('title' => 'Jersey','bounds' => array(array(40.72878729696505, -74.09162521362305), array(40.71213418976525, -74.08819198608398), array(40.71135347314246, -74.06003952026367), array(40.7342506899291, -74.04561996459961), array(40.73841297394456, -74.0672492980957)),'latitude' => 40.724883223543515,'longitude' => -74.06862258911133),
                    array('title' => 'Newark','bounds' => array(array(40.746736760718505, -74.19445037841797), array(40.718639805628364, -74.19788360595703), array(40.70406634324247, -74.17247772216797), array(40.73633186448861, -74.12784576416016), array(40.75505950577882, -74.14981842041016)),'latitude' => 40.729562924510645,'longitude' => -74.1628646850586),
                    array('title' => 'Staten','bounds' => array(array(40.58840673108871, -74.16097640991211), array(40.567545853080496, -74.14827346801758), array(40.57432635193039, -74.10226821899414), array(40.595445809202644, -74.08956527709961), array(40.60013811627228, -74.11909103393555)),'latitude' => 40.58384198467638,'longitude' => -74.12527084350586)
                )
            ),
            array(
                'title' => 'San Francisco',
                'areas' => array(
                    array('title' => 'Sunset','bounds' => array(array(37.75388691002291, -122.5001335144043), array(37.756872771856465, -122.4836540222168), array(37.742213748480864, -122.46305465698242), array(37.72945260537779, -122.46923446655273), array(37.72782336496339, -122.5004768371582)),'latitude' => 37.742348068409925,'longitude' => -122.48176574707031),
                    array('title' => 'The Castro','bounds' => array(array(37.76433689922218, -122.43760585784912), array(37.763251254778815, -122.4270486831665), array(37.75890851765176, -122.42601871490479), array(37.75619417747575, -122.4388074874878)),'latitude' => 37.76026553834896,'longitude' => -122.43241310119629),
                    array('title' => 'Crocker Amazon','bounds' => array(array(37.71370177998719, -122.44528770446777), array(37.71261539271678, -122.42520332336426), array(37.70609673460725, -122.42091178894043), array(37.7025655553889, -122.42606163024902), array(37.70066408151449, -122.44837760925293)),'latitude' => 37.70718293075084,'longitude' => -122.43464469909668),
                    array('title' => 'Daly','bounds' => array(array(37.69849090879089, -122.48331069946289), array(37.6976759525956, -122.45790481567383), array(37.6816466602918, -122.44623184204102), array(37.67458180459873, -122.48502731323242)),'latitude' => 37.68653635669481,'longitude' => -122.46562957763672),
                    array('title' => 'Hunters Point','bounds' => array(array(37.73542618022824, -122.3851203918457), array(37.716417678476226, -122.38821029663086), array(37.719133477410494, -122.36761093139648), array(37.73651223296987, -122.3573112487793)),'latitude' => 37.726464955723046,'longitude' => -122.37276077270508)
                )
            ),
            array(
                'title' => 'Paris',
                'areas' => array(
                    array('title' => 'Saint Denis','bounds' => array(array(48.9437002472489, 2.343006134033203), array(48.93761152467514, 2.389698028564453), array(48.92565742765472, 2.3804283142089844), array(48.91505423005781, 2.3378562927246094)),'latitude' => 48.92937723865336,'longitude' => 2.3637771606445312),
                    array('title' => 'Clichy','bounds' => array(array(48.90693110948285, 2.299833297729492), array(48.90659261746477, 2.3164844512939453), array(48.89632393659644, 2.3260974884033203), array(48.88977796218323, 2.321462631225586), array(48.89384108167838, 2.2962284088134766)),'latitude' => 48.898354535833036,'longitude' => 2.3111629486083984),
                    array('title' => 'Drancy','bounds' => array(array(48.92092010691461, 2.4696922302246094), array(48.910315903555315, 2.4604225158691406), array(48.909638963083765, 2.4274635314941406), array(48.925883003147874, 2.429180145263672), array(48.93197315629521, 2.4521827697753906)),'latitude' => 48.92080605968948,'longitude' => 2.448577880859375),
                    array('title' => 'Pantin','bounds' => array(array(48.89948375541988, 2.3999977111816406), array(48.88052184622007, 2.430896759033203), array(48.87329637017783, 2.3793983459472656)),'latitude' => 48.88639006279885,'longitude' => 2.4051475524902344),
                    array('title' => 'Centre','bounds' => array(array(48.859858726171105, 2.3442935943603516), array(48.8573740606269, 2.3686695098876953), array(48.83997794833464, 2.340688705444336), array(48.850822987537555, 2.3221492767333984)),'latitude' => 48.84991833725287,'longitude' => 2.345409393310547)
                )
            ),
            array(
                'title' => 'Tokyo',
                'areas' => array(
                    array('title' => 'Ekoda','bounds' => array(array(35.745397676018534, 139.6552848815918), array(35.74233248982313, 139.6830940246582), array(35.728119630012245, 139.67897415161133), array(35.73118536335559, 139.64910507202148)),'latitude' => 35.736758653015386,'longitude' => 139.66609954833984),
                    array('title' => 'Mejiro','bounds' => array(array(35.72505377866853, 139.7000026702881), array(35.72421761691415, 139.714937210083), array(35.720036676496555, 139.71287727355957), array(35.71822486751198, 139.6958827972412), array(35.72170907899236, 139.68592643737793)),'latitude' => 35.72163932309026,'longitude' => 139.70043182373047),
                    array('title' => 'Nakano','bounds' => array(array(35.697734622419325, 139.68335151672363), array(35.69132162707605, 139.67717170715332), array(35.69675876508983, 139.6538257598877), array(35.721012248885295, 139.66069221496582), array(35.7186429809343, 139.68180656433105)),'latitude' => 35.70616693798067,'longitude' => 139.66858863830566),
                    array('title' => 'Shinjuku','bounds' => array(array(35.68351380631503, 139.70343589782715), array(35.68267720876588, 139.72352027893066), array(35.69550407383317, 139.72180366516113), array(35.69592230644545, 139.70274925231934)),'latitude' => 35.68929975760567,'longitude' => 139.713134765625),
                    array('title' => 'Center','bounds' => array(array(35.71467081484196, 139.72493648529053), array(35.71258012158056, 139.73987102508545), array(35.704356195974704, 139.7418451309204), array(35.702195532416475, 139.72073078155518), array(35.710001524357104, 139.710431098938)),'latitude' => 35.70843317362922,'longitude' => 139.7261381149292)
                )
            ),
            array(
                'title' => 'South Africa',
                'areas' => array(
                    array('title' => 'Port Elizabeth','bounds' => array(array(-33.797408767572485, 24.8126220703125), array(-33.578014746143985, 26.5484619140625), array(-32.41706632846282, 26.2847900390625), array(-32.463425957761025, 23.8238525390625)),'latitude' => -33.10723754801765,'longitude' => 25.1861572265625),
                    array('title' => 'Knysna','bounds' => array(array(-33.449776583118435, 22.9779052734375), array(-33.54139466898275, 24.1094970703125), array(-34.30714385628803, 24.2742919921875), array(-34.64224704776853, 23.4722900390625), array(-34.3343644870263, 22.6043701171875)),'latitude' => -34.04601181544348,'longitude' => 23.4393310546875),
                    array('title' => 'Cape Town','bounds' => array(array(-33.385586268871016, 17.9791259765625), array(-33.11915022676886, 19.4952392578125), array(-33.97069799736161, 19.9127197265625), array(-34.46127728843705, 19.9786376953125), array(-34.5065566216456, 18.2757568359375)),'latitude' => -33.81285342420723,'longitude' => 18.9788818359375),
                    array('title' => 'De Aar','bounds' => array(array(-30.202113679097213, 23.4173583984375), array(-30.32547125932808, 24.9005126953125), array(-31.194007509998823, 24.7137451171875), array(-31.297327991404263, 23.6700439453125)),'latitude' => -30.749720835250738,'longitude' => 24.158935546875),
                    array('title' => 'Lesotho','bounds' => array(array(-28.401064827220896, 27.279052734375), array(-28.90239722855847, 29.849853515625), array(-29.954934549656134, 29.805908203125), array(-30.67571540416773, 28.751220703125), array(-30.410781790845874, 26.971435546875)),'latitude' => -29.538390115694312,'longitude' => 28.41064453125)
                )
            ),
            array(
                'title' => 'Brasil',
                'areas' => array(
                    array('title' => 'Belem','bounds' => array(array(-2.416275654706373, -49.427490234375), array(-2.5479878714713706, -46.922607421875), array(-1.252341676699616, -46.417236328125), array(0, -48.812255859375)),'latitude' => -1.2739939357356853,'longitude' => -47.92236328125),
                    array('title' => 'Sao Luis','bounds' => array(array(-2.0210651187669897, -44.7747802734375), array(-2.6248138208185074, -43.3905029296875), array(-3.118576216781991, -43.3575439453125), array(-3.5792127858606437, -43.9617919921875), array(-3.392790869678844, -45.2032470703125)),'latitude' => -2.8001389523138167,'longitude' => -44.2803955078125),
                    array('title' => 'Rio de Janeiro','bounds' => array(array(-20.756113874762068, -45.06591796875), array(-21.002471054356715, -39.08935546875), array(-24.04646399966658, -39.52880859375), array(-25.48295117535531, -42.51708984375), array(-24.926294766395593, -45.68115234375)),'latitude' => -23.119532525058688,'longitude' => -42.38525390625),
                    array('title' => 'Para','bounds' => array(array(-4.872047700241915, -55.04150390625), array(-5.04717073691972, -50.33935546875), array(-9.66573839518868, -46.42822265625), array(-9.79567758282973, -50.07568359375), array(-9.188870084473393, -56.00830078125)),'latitude' => -7.3338626415358235,'longitude' => -51.21826171875),
                    array('title' => 'Salvador','bounds' => array(array(-11.458490752653873, -39.825439453125), array(-12.060809058367294, -36.859130859375), array(-13.410994034321702, -36.815185546875), array(-14.051330743518161, -38.001708984375), array(-14.051330743518161, -40.989990234375)),'latitude' => -12.754910748086017,'longitude' => -38.902587890625),
                    array('title' => 'Brasilia','bounds' => array(array(-15.00846369500486, -48.3563232421875), array(-15.580710739162123, -47.0050048828125), array(-16.056371485561677, -47.0819091796875), array(-16.0352548623504, -48.0596923828125)),'latitude' => -15.532417590283268,'longitude' => -47.6806640625)
                )
            ),
            array(
                'title' => 'Berlin',
                'areas' => array(
                    array('title' => 'Moabit','bounds' => array(array(52.53794364304724, 13.322467803955078), array(52.53710835019913, 13.352336883544922), array(52.526874723076205, 13.35714340209961), array(52.522905940278065, 13.313884735107422)),'latitude' => 52.530424791662654,'longitude' => 13.335514068603516),
                    array('title' => 'Mitte','bounds' => array(array(52.53355817830341, 13.37259292602539), array(52.526665848711, 13.373966217041016), array(52.52353261403368, 13.393878936767578), array(52.531887409851336, 13.412761688232422), array(52.5394053672929, 13.388042449951172)),'latitude' => 52.531468990663285,'longitude' => 13.392677307128906),
                    array('title' => 'Tiergarten','bounds' => array(array(52.51726547416385, 13.340320587158203), array(52.50890789689545, 13.343067169189453), array(52.506191342034576, 13.360919952392578), array(52.51016163481784, 13.36709976196289), array(52.51663871100423, 13.358516693115234)),'latitude' => 52.511728408099216,'longitude' => 13.353710174560547),
                    array('title' => 'Krauzberg','bounds' => array(array(52.502638670794546, 13.378772735595703), array(52.50305664701985, 13.40658187866211), array(52.49699560277579, 13.40932846069336), array(52.49009753598084, 13.40108871459961), array(52.49218797351941, 13.378429412841797)),'latitude' => 52.49657709150034,'longitude' => 13.393878936767578),
                    array('title' => 'Fennpfuhl','bounds' => array(array(52.532305107923925, 13.46348762512207), array(52.53032100669383, 13.485288619995117), array(52.52457705042609, 13.483915328979492), array(52.52405483533408, 13.46400260925293)),'latitude' => 52.528179971629,'longitude' => 13.474388122558594)
                )
            ),
            array(
                'title' => 'London',
                'areas' => array(
                    array('title' => 'Center','bounds' => array(array(51.51216124955517, -0.12642860412597656), array(51.50468231156003, -0.10582923889160156), array(51.49901887040353, -0.11166572570800781), array(51.50083552254009, -0.1348400115966797)),'latitude' => 51.505590059979355,'longitude' => -0.12033462524414062),
                    array('title' => 'Mayfair','bounds' => array(array(51.51493882813492, -0.1562976837158203), array(51.5091698216777, -0.1405048370361328), array(51.50810140697543, -0.1499462127685547), array(51.508956140741624, -0.1574993133544922)),'latitude' => 51.51152011755518,'longitude' => -0.1490020751953125),
                    array('title' => 'Belgravia','bounds' => array(array(51.499766912405946, -0.15715599060058594), array(51.49399598470283, -0.14410972595214844), array(51.49420973579561, -0.1568126678466797), array(51.495171603309615, -0.1638507843017578)),'latitude' => 51.49688144855439,'longitude' => -0.15398025512695312),
                    array('title' => 'North','bounds' => array(array(51.51622073035779, -0.1439380645751953), array(51.51611390655047, -0.12333869934082031), array(51.523590968044765, -0.10565757751464844), array(51.52903776845088, -0.1286602020263672), array(51.53074643430678, -0.1528644561767578)),'latitude' => 51.523430170428625,'longitude' => -0.12926101684570312)
                )
            ),
            array(
                'title' => 'Belgrade',
                'areas' => array(
                    array('title' => 'tosin bunar','bounds' => array(array(44.83079564666987, 20.39332866668701), array(44.8261693083789, 20.39435863494873), array(44.82476915912614, 20.40285587310791), array(44.828786887497415, 20.406804084777832), array(44.8324999934906, 20.40036678314209)),'latitude' => 44.828634576308374,'longitude' => 20.400066375732422),
                    array('title' => 'novi beograd','bounds' => array(array(44.82629105888064, 20.41186809539795), array(44.82251667375207, 20.410408973693848), array(44.81728082719224, 20.4146146774292), array(44.82032498188776, 20.42482852935791), array(44.82531704766643, 20.422167778015137)),'latitude' => 44.821785943036446,'longitude' => 20.41761875152588),
                    array('title' => 'blokovi','bounds' => array(array(44.81429739966232, 20.397191047668457), array(44.81009598489741, 20.396761894226074), array(44.80632053954651, 20.401225090026855), array(44.80863455149579, 20.41238307952881), array(44.81344496344603, 20.413498878479004)),'latitude' => 44.81030896960442,'longitude' => 20.40513038635254),
                    array('title' => 'sava','bounds' => array(array(44.81149649049356, 20.439162254333496), array(44.80552888256852, 20.43778896331787), array(44.8018749403434, 20.451607704162598), array(44.80723397640544, 20.460362434387207), array(44.815758689575325, 20.451693534851074)),'latitude' => 44.808816814959364,'longitude' => 20.44907569885254),
                    array('title' => 'zemun','bounds' => array(array(44.84558526294666, 20.40088176727295), array(44.84442901000019, 20.41306972503662), array(44.83676064003701, 20.4146146774292), array(44.83657804736018, 20.39865016937256), array(44.84114269070498, 20.39384365081787)),'latitude' => 44.84108165515342,'longitude' => 20.404229164123535),
                    array('title' => 'centar','bounds' => array(array(44.81697640288321, 20.46379566192627), array(44.81113114448624, 20.46654224395752), array(44.80826918735956, 20.47400951385498), array(44.811313817779194, 20.483450889587402), array(44.81581957585145, 20.48396587371826)),'latitude' => 44.812622795121385,'longitude' => 20.473880767822266)
                )
            )
        );


        foreach($maps as $map){
            // create map

            $mapMdl = new MapModel($this->getEntityManager());
            $map_o = $mapMdl->create($map);
            $map_id = $map_o->message;


            foreach($map['areas'] as $area)
            {
                $area['color']  = '#ff0000';
                $area['map']    = $map_id;

                $areaMdl = new AreaModel($this->getEntityManager());
                $response = $areaMdl->create($area);

                echo print_r($response, 1).'<br />';
            }
        }
    }



}
