/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.12.0 - 2014-11-16
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.datepicker","ui.bootstrap.dateparser","ui.bootstrap.position"]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,a,r,n,i,o,l){var c=this,s={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(a,n){c[a]=angular.isDefined(t[a])?8>n?r(t[a])(e.$parent):e.$parent.$eval(t[a]):l[a]}),angular.forEach(["minDate","maxDate"],function(r){t[r]?e.$parent.$watch(a(t[r]),function(e){c[r]=e?new Date(e):null,c.refreshView()}):c[r]=l[r]?new Date(l[r]):null}),e.datepickerMode=e.datepickerMode||l.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===c.compare(t.date,c.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){s=e,s.$render=function(){c.render()}},this.render=function(){if(s.$modelValue){var e=new Date(s.$modelValue),t=!isNaN(e);t?this.activeDate=e:i.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),s.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=s.$modelValue?new Date(s.$modelValue):null;s.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var a=s.$modelValue?new Date(s.$modelValue):null;return{date:e,label:o(e,t),selected:a&&0===this.compare(e,a),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(a){return this.minDate&&this.compare(a,this.minDate)<0||this.maxDate&&this.compare(a,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:a,mode:e.datepickerMode})},this.split=function(e,t){for(var a=[];e.length>0;)a.push(e.splice(0,t));return a},e.select=function(t){if(e.datepickerMode===c.minMode){var a=s.$modelValue?new Date(s.$modelValue):new Date(0,0,0,0,0,0,0);a.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),s.$setViewValue(a),s.$render()}else c.activeDate=t,e.datepickerMode=c.modes[c.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=c.activeDate.getFullYear()+e*(c.step.years||0),a=c.activeDate.getMonth()+e*(c.step.months||0);c.activeDate.setFullYear(t,a,1),c.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===c.maxMode&&1===t||e.datepickerMode===c.minMode&&-1===t||(e.datepickerMode=c.modes[c.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){n(function(){c.element[0].focus()},0,!1)};e.$on("datepicker.focus",u),e.keydown=function(t){var a=e.keys[t.which];if(a&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===a||"space"===a){if(c.isDisabled(c.activeDate))return;e.select(c.activeDate),u()}else!t.ctrlKey||"up"!==a&&"down"!==a?(c.handleKeyDown(a,t),c.refreshView()):(e.toggleMode("up"===a?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,a,r){var n=r[0],i=r[1];i&&n.init(i)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,a,r,n){function i(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?c[t]:29}function o(e,t){var a=new Array(t),r=new Date(e),n=0;for(r.setHours(12);t>n;)a[n++]=new Date(r),r.setDate(r.getDate()+1);return a}function l(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var a=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((a-t)/864e5)/7)+1}t.showWeeks=n.showWeeks,n.step={months:1},n.element=a;var c=[31,28,31,30,31,30,31,31,30,31,30,31];n._refreshView=function(){var a=n.activeDate.getFullYear(),r=n.activeDate.getMonth(),i=new Date(a,r,1),c=n.startingDay-i.getDay(),s=c>0?7-c:-c,u=new Date(i);s>0&&u.setDate(-s+1);for(var d=o(u,42),p=0;42>p;p++)d[p]=angular.extend(n.createDateObject(d[p],n.formatDay),{secondary:d[p].getMonth()!==r,uid:t.uniqueId+"-"+p});t.labels=new Array(7);for(var f=0;7>f;f++)t.labels[f]={abbr:e(d[f].date,n.formatDayHeader),full:e(d[f].date,"EEEE")};if(t.title=e(n.activeDate,n.formatDayTitle),t.rows=n.split(d,7),t.showWeeks){t.weekNumbers=[];for(var h=l(t.rows[0][0].date),g=t.rows.length;t.weekNumbers.push(h++)<g;);}},n.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},n.handleKeyDown=function(e){var t=n.activeDate.getDate();if("left"===e)t-=1;else if("up"===e)t-=7;else if("right"===e)t+=1;else if("down"===e)t+=7;else if("pageup"===e||"pagedown"===e){var a=n.activeDate.getMonth()+("pageup"===e?-1:1);n.activeDate.setMonth(a,1),t=Math.min(i(n.activeDate.getFullYear(),n.activeDate.getMonth()),t)}else"home"===e?t=1:"end"===e&&(t=i(n.activeDate.getFullYear(),n.activeDate.getMonth()));n.activeDate.setDate(t)},n.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,a,r,n){n.step={years:1},n.element=a,n._refreshView=function(){for(var a=new Array(12),r=n.activeDate.getFullYear(),i=0;12>i;i++)a[i]=angular.extend(n.createDateObject(new Date(r,i,1),n.formatMonth),{uid:t.uniqueId+"-"+i});t.title=e(n.activeDate,n.formatMonthTitle),t.rows=n.split(a,3)},n.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},n.handleKeyDown=function(e){var t=n.activeDate.getMonth();if("left"===e)t-=1;else if("up"===e)t-=3;else if("right"===e)t+=1;else if("down"===e)t+=3;else if("pageup"===e||"pagedown"===e){var a=n.activeDate.getFullYear()+("pageup"===e?-1:1);n.activeDate.setFullYear(a)}else"home"===e?t=0:"end"===e&&(t=11);n.activeDate.setMonth(t)},n.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,a,r){function n(e){return parseInt((e-1)/i,10)*i+1}var i=r.yearRange;r.step={years:i},r.element=t,r._refreshView=function(){for(var t=new Array(i),a=0,o=n(r.activeDate.getFullYear());i>a;a++)t[a]=angular.extend(r.createDateObject(new Date(o+a,0,1),r.formatYear),{uid:e.uniqueId+"-"+a});e.title=[t[0].label,t[i-1].label].join(" - "),e.rows=r.split(t,5)},r.compare=function(e,t){return e.getFullYear()-t.getFullYear()},r.handleKeyDown=function(e){var t=r.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=5:"right"===e?t+=1:"down"===e?t+=5:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*r.step.years:"home"===e?t=n(r.activeDate.getFullYear()):"end"===e&&(t=n(r.activeDate.getFullYear())+i-1),r.activeDate.setFullYear(t)},r.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,a,r,n,i,o){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(l,c,s,u){function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function p(e){if(e){if(angular.isDate(e)&&!isNaN(e))return u.$setValidity("date",!0),e;if(angular.isString(e)){var t=i.parse(e,f)||new Date(e);return isNaN(t)?void u.$setValidity("date",!1):(u.$setValidity("date",!0),t)}return void u.$setValidity("date",!1)}return u.$setValidity("date",!0),null}var f,h=angular.isDefined(s.closeOnDateSelection)?l.$parent.$eval(s.closeOnDateSelection):o.closeOnDateSelection,g=angular.isDefined(s.datepickerAppendToBody)?l.$parent.$eval(s.datepickerAppendToBody):o.appendToBody;l.showButtonBar=angular.isDefined(s.showButtonBar)?l.$parent.$eval(s.showButtonBar):o.showButtonBar,l.getText=function(e){return l[e+"Text"]||o[e+"Text"]},s.$observe("datepickerPopup",function(e){f=e||o.datepickerPopup,u.$render()});var D=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");D.attr({"ng-model":"date","ng-change":"dateSelection()"});var m=angular.element(D.children()[0]);s.datepickerOptions&&angular.forEach(l.$parent.$eval(s.datepickerOptions),function(e,t){m.attr(d(t),e)}),l.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(e){if(s[e]){var a=t(s[e]);if(l.$parent.$watch(a,function(t){l.watchData[e]=t}),m.attr(d(e),"watchData."+e),"datepickerMode"===e){var r=a.assign;l.$watch("watchData."+e,function(e,t){e!==t&&r(l.$parent,e)})}}}),s.dateDisabled&&m.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),u.$parsers.unshift(p),l.dateSelection=function(e){angular.isDefined(e)&&(l.date=e),u.$setViewValue(l.date),u.$render(),h&&(l.isOpen=!1,c[0].focus())},c.bind("input change keyup",function(){l.$apply(function(){l.date=u.$modelValue})}),u.$render=function(){var e=u.$viewValue?n(u.$viewValue,f):"";c.val(e),l.date=p(u.$modelValue)};var y=function(e){l.isOpen&&e.target!==c[0]&&l.$apply(function(){l.isOpen=!1})},v=function(e){l.keydown(e)};c.bind("keydown",v),l.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),l.close()):40!==e.which||l.isOpen||(l.isOpen=!0)},l.$watch("isOpen",function(e){e?(l.$broadcast("datepicker.focus"),l.position=g?r.offset(c):r.position(c),l.position.top=l.position.top+c.prop("offsetHeight"),a.bind("click",y)):a.unbind("click",y)}),l.select=function(e){if("today"===e){var t=new Date;angular.isDate(u.$modelValue)?(e=new Date(u.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}l.dateSelection(e)},l.close=function(){l.isOpen=!1,c[0].focus()};var w=e(D)(l);D.remove(),g?a.find("body").append(w):c.after(w),l.$on("$destroy",function(){w.remove(),c.unbind("keydown",v),a.unbind("click",y)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function a(e){var a=[],r=e.split("");return angular.forEach(n,function(t,n){var i=e.indexOf(n);if(i>-1){e=e.split(""),r[i]="("+t.regex+")",e[i]="$";for(var o=i+1,l=i+n.length;l>o;o++)r[o]="",e[o]="$";e=e.join(""),a.push({index:i,apply:t.apply})}}),{regex:new RegExp("^"+r.join("")+"$"),map:t(a,"index")}}function r(e,t,a){return 1===t&&a>28?29===a&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>a:!0}this.parsers={};var n={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(t,n){if(!angular.isString(t)||!n)return t;n=e.DATETIME_FORMATS[n]||n,this.parsers[n]||(this.parsers[n]=a(n));var i=this.parsers[n],o=i.regex,l=i.map,c=t.match(o);if(c&&c.length){for(var s,u={year:1900,month:0,date:1,hours:0},d=1,p=c.length;p>d;d++){var f=l[d-1];f.apply&&f.apply.call(u,c[d])}return r(u.year,u.month,u.date)&&(s=new Date(u.year,u.month,u.date,u.hours)),s}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function a(e,a){return e.currentStyle?e.currentStyle[a]:t.getComputedStyle?t.getComputedStyle(e)[a]:e.style[a]}function r(e){return"static"===(a(e,"position")||"static")}var n=function(t){for(var a=e[0],n=t.offsetParent||a;n&&n!==a&&r(n);)n=n.offsetParent;return n||a};return{position:function(t){var a=this.offset(t),r={top:0,left:0},i=n(t[0]);i!=e[0]&&(r=this.offset(angular.element(i)),r.top+=i.clientTop-i.scrollTop,r.left+=i.clientLeft-i.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:a.top-r.top,left:a.left-r.left}},offset:function(a){var r=a[0].getBoundingClientRect();return{width:r.width||a.prop("offsetWidth"),height:r.height||a.prop("offsetHeight"),top:r.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,a,r){var n,i,o,l,c=a.split("-"),s=c[0],u=c[1]||"center";n=r?this.offset(e):this.position(e),i=t.prop("offsetWidth"),o=t.prop("offsetHeight");var d={center:function(){return n.left+n.width/2-i/2},left:function(){return n.left},right:function(){return n.left+n.width}},p={center:function(){return n.top+n.height/2-o/2},top:function(){return n.top},bottom:function(){return n.top+n.height}};switch(s){case"right":l={top:p[u](),left:d[s]()};break;case"left":l={top:p[u](),left:n.left-i};break;case"bottom":l={top:p[s](),left:d[u]()};break;default:l={top:n.top-o,left:d[u]()}}return l}}}]);